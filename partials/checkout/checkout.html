<section class="row store-checkout container">

  <wizard name="checkoutWizard" hide-indicators="false" on-finish="finished()" current-step="currentStep">

  <!--current step: {{checkout.currentStep}}-->

    <!-- sign in -->
    <wz-step title="Start">

      <div id="signin" class="col-sm-12">

        <div class="col-md-offset-3">
          <h1 class="checkouth1" ng-if="!isOnlineSponsoring">Sign in to complete your order</h1>
          <h1 class="checkouth1" ng-if="isOnlineSponsoring">Create an Account</h1>
        </div>
        <!--valid={{signInForm.$valid}}-->
        <form name="signInForm" class="form-horizontal" role="form">

          <div class="form-group" ng-if="isOnlineSponsoring">
            <label for="firstName" class="col-md-3 control-label">Name</label>
            <div class="col-sm-3">
              <input name="firstName" ng-model="profile.firstName" ng-change="checkoutUpdated()" class="form-control" id="firstName" placeholder="First" tabindex="1" required="" autocomplete="off">
              <!--valid={{signInForm.firstName.$valid}}-->
            </div>
            <div class="col-sm-3">
              <input name="lastName" ng-model="profile.lastName" ng-change="checkoutUpdated()" class="form-control" id="lastName" placeholder="Last" tabindex="1" required="" autocomplete="off">
              <!--valid={{signInForm.lastName.$valid}}-->
            </div>
          </div>

          <div class="form-group">
            <label for="loginEmail" class="col-md-3 control-label">Email Address</label>
            <div class="col-sm-6">
              <input name="loginEmail" ng-model="profile.loginEmail" ng-change="checkoutUpdated()" type="email" class="form-control" id="loginEmail" placeholder="Email" tabindex="1" required>
              <!--valid={{signInForm.loginEmail.$valid}}-->
            </div>
          </div>

          <div class="form-group" ng-if="isOnlineSponsoring">
            <label for="phoneNumber" class="col-md-3 control-label">Phone number</label>
            <div class="col-sm-6">
              <input name="phoneNumber" ui-mask="(999) 999-9999" ng-model="profile.phoneNumber" ng-change="checkoutUpdated()" class="form-control" id="phoneNumber" placeholder="(xxx) xxx-xxxx" tabindex="1" required>
              <!--valid={{signInForm.phoneNumber.$valid}}-->
            </div>
          </div>

          <div class="form-group">
            <label for="inputPassword3" class="col-md-3 control-label">Password</label>
            <div class="col-sm-4">
              <input name="loginPassword" ng-model="profile.loginPassword" ng-change="checkoutUpdated()" type="password" class="form-control" id="inputPassword3" placeholder="Password" tabindex="2" required>
              <!--valid={{signInForm.loginPassword.$valid}}-->
            </div>
          </div>

          <div class="form-group" ng-if="!isOnlineSponsoring">
            <div class="col-md-offset-3 col-sm-9">

              <div class="radio">
                <label>
                  <input name="customerStatus" ng-model="profile.customerStatus" ng-change="checkoutUpdated()" type="radio" id="optionsRadios1" value="new">
                  I am a new customer
                </label>
              </div>
              <div class="radio">
                <label>
                  <input name="customerStatus" ng-model="profile.customerStatus" ng-change="checkoutUpdated()" type="radio" id="optionsRadios2" value="existing">
                  I am an existing customer
                </label>
              </div>

            </div>
          </div>
          <!--valid={{signInForm.customerStatus.$valid}}-->

          <div class="form-group">
            <div class="col-md-offset-3 col-sm-9">

              <!--profile.customerStatus={{profile.customerStatus}}-->
              <div class="row"><div class="col-sm-6"><hr></div></div>

              <div ng-if="loginError" class="alert-danger">Invalid username or password.</div>

              <div class="checkbox" ng-if="!isOnlineSponsoring">
                <label>
                  <!--valid={{signInForm.keepMeSignedIn.$valid}}-->
                  <input name="keepMeSignedIn" ng-model="checkout.keepMeSignedIn" ng-change="checkoutUpdated()" type="checkbox" checked> Keep me signed in &nbsp;&nbsp;
                  <a popover="Placeholder text" popover-title="Keep me signed in" href=""><i class="fa fa-info-circle"></i> More Info</a>
                </label>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="col-md-offset-3 col-sm-9">
              <div class="input-group">
                <span class="input-group-addon"><i class="fa fa-lock"></i></span>
                <button ng-if="!isOnlineSponsoring" type="button" class="btn btn-primary btn-lg" tabindex="3" ng-click="loginOrCreateUser(profile.loginEmail, profile.loginPassword)" ng-disabled="!signInForm.$valid">Continue to Secure Checkout &nbsp;<i class="fa fa-caret-right"></i></button>
                <button ng-if="isOnlineSponsoring" type="button" class="btn btn-primary btn-lg" tabindex="3" wz-next ng-disabled="!signInForm.$valid">Continue to Secure Checkout &nbsp;<i class="fa fa-caret-right"></i></button>
              </div>
            </div>
          </div>

          <div class="form-group" ng-if="!isOnlineSponsoring">
            <div class="col-md-offset-3 col-sm-9">
              <div class="row"><div class="col-sm-6"><hr></div></div>
              <p><a ng-href="{{APP_BASE_URL}}/checkout?step=Shipping">Checkout as guest</a></p>
              <p><a href="" onclick="$('#forgot').css('display','block'); $('#signin').css('display','none');">I forgot my password</a></p>
              <p><a href="">Update profile</a></p>
            </div>
          </div>
        </form>
      </div><!--/span-->
      
      <div id="forgot" class="col-sm-12" style="display: none;">

        <div class="col-md-offset-3">
          <h1 class="checkouth1">Forgot Your Password</h1>
        </div>
        <!--valid={{signInForm.$valid}}-->
        <form name="forgotPassword" class="form-horizontal" role="form">
            <div class="form-group">
              <label for="inputEmail3" class="col-md-3 control-label">Email Address</label>
              <div class="col-sm-6">
                <input name="loginEmail2" ng-model="loginEmail2" ng-change="checkoutUpdated()" type="email" class="form-control" id="inputEmail3" placeholder="Email" tabindex="1" required>
                <!--valid={{signInForm.loginEmail.$valid}}-->
              </div>
            </div>

            <div class="form-group">
              <div class="col-md-offset-3 col-sm-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-lock"></i></span>
                  <button type="button" class="btn btn-primary btn-lg" tabindex="3" onclick="$('#forgot').css('display','none'); $('#thanks').css('display','block')" ng-disabled="!forgotPassword.$valid">Reset Password &nbsp;<i class="fa fa-caret-right"></i></button>

                </div>
              </div>
            </div>
        </form>
      </div><!--/span-->

      <div id="thanks" class="col-sm-12" style="display: none;">

        <div class="col-md-offset-3">
          <h1 class="checkouth1">Thank You!</h1>
        </div>
        <!--valid={{signInForm.$valid}}-->
        <form name="" class="form-horizontal" role="form">
            

<!--            <div class="form-group">
              <label for="inputPassword3" class="col-md-3 control-label">Password</label>
              <div class="col-sm-4">
                <input name="loginPassword" ng-model="loginPassword" ng-change="checkoutUpdated()" type="password" class="form-control" id="inputPassword3" placeholder="Password" tabindex="2" required>
              </div>
            </div>-->

            <div class="form-group">
              <div class="col-md-offset-3 col-sm-9">
                  <p>Please check your email and click on the link.</p>
                <div class="row"><div class="col-sm-6"><hr></div></div>
                <p><a href="">Resend Email</a></p>
                <p><a href="" onclick="$('#resetpass').css('display','block'); $('#thanks').css('display','none');">Reset password form (prototype only)</a></p>
                <p><a ng-href="{{STORE_BASE_URL}}/cart">Back to cart</a></p>
              </div>
            </div>
        </form>
      </div><!--/span-->
      
      <div id="resetpass" class="col-sm-12" style="display: none;">

        <div class="col-md-offset-3">
          <h1 class="checkouth1">Reset Password</h1>
        </div>
        <!--valid={{signInForm.$valid}}-->
        <form name="resetPassword" class="form-horizontal" role="form">
            <div class="form-group">
              <label for="newPassword" class="col-md-3 control-label">New Password</label>
              <div class="col-sm-4">
                <input name="newPassword" ng-model="newPassword" pw-check="newpassword2" ng-change="checkoutUpdated()" type="password" class="form-control" id="newPassword" placeholder="Password" tabindex="2" required>
              </div>
            </div>

            <div class="form-group">
              <label for="newPassword2" class="col-md-3 control-label">Confirm New Password</label>
              <div class="col-sm-4">
                <input name="newPassword2" ng-model="newPassword2" ng-change="checkoutUpdated();" type="password" class="form-control" id="newPassword2" placeholder="Confirm Password" tabindex="2" required>
              </div>
              <span class="error" ng-show="resetPassword.password.$error.pwmatch"> Passwords don't match. </span>
            </div>

            <div class="form-group">
              <div class="col-md-offset-3 col-sm-9">
                <div class="input-group">
                  <span class="input-group-addon"><i class="fa fa-lock"></i></span>
                  <button type="button" class="btn btn-primary btn-lg" tabindex="3" onclick="$('#resetpass').css('display','none');$('#signin').css('display','block')" ng-disabled="!resetPassword.$valid">Reset Password &nbsp;<i class="fa fa-caret-right"></i></button>

                </div>
              </div>
            </div>
        </form>
      </div><!--/span-->

    </wz-step>

    <wz-step title="Profile" ng-if="isOnlineSponsoring">
      <div id="profile" class="col-sm-12">

        <div class="col-md-offset-3">
          <h1 class="checkouth1">Complete Your JAFRA Consultant Profile</h1>
        </div>
        <!-- SPACER --> <p><br></p> <!-- REPLACE WITH CSS FROM UI DESIGN ITERATIONS BEFORE LAUNCH -->
        <!--valid={{signInForm.$valid}}-->
        <form name="profileForm" class="form-horizontal" role="form">

          <div class="form-group">
            <label class="col-md-3 control-label">Contact Info</label>
            <div class="col-sm-9 col-md-5">
              <div class="well">
                <h3><span ng-bind="profile.firstName"></span> <span ng-bind="profile.lastName"></span></h3>
                <p><b ng-bind="profile.loginEmail"></b></p>
                <p>{{profile.phoneNumber|phone}}</p>
                <a href="#" wz-prev><i class="fa fa-pencil-square-o"></i> Edit</a>
              </div>
            </div>
            <div class="col-md-offset-3 col-sm-9">
              <div class="row"><div class="col-sm-8"><hr></div></div>
            </div>
          </div>

          <div class="form-group">
            <label for=" " class="col-md-3 control-label">Sponsor ID</label>
            <div class="col-md-4">
              <input type="text" class="form-control" type="number" ng-model="profile.sponsorId" placeholder="#-digit ID of your JAFRA Consultant Sponsor">
              <span class="help-block"><small>If you shop with a JAFRA Consultant, enter their ID above. Otherwise, leave blank.</small></span>
            </div>
          </div>

          <div class="form-group">
            <label for=" " class="col-md-3 control-label">Date of Birth</label>
            <div class="col-xs-4 col-md-1">
              <input type="text" class="form-control" ui-mask="99" placeholder="MM" ng-model="profile.dobMonth" required>
            </div>
            <div class="col-xs-4 col-md-1">
              <input type="text" class="form-control" ui-mask="99" placeholder="DD" ng-model="profile.dobDay" required>
            </div>
            <div class="col-xs-4 col-md-1">
              <input type="text" class="form-control" ui-mask="99" placeholder="YY" ng-model="profile.dobYear" required>
            </div>
            <div class="col-md-offset-3 col-sm-9">
              <span class="help-block"><small>You must be 18 or older to join.</small></span>
            </div>
          </div>

          <div class="form-group">
            <label for=" " class="col-md-3 control-label">SSN</label>
            <div class="col-md-3">
              <div class="input-group">
                <span class="input-group-addon"><i class="fa fa-lock"><!-- lock icon --></i></span>
                <input type="text" class="form-control" ui-mask="999 - 99 - 9999" placeholder="xxx - xx - xxxx" ng-model="profile.ssn" required>
              </div>
              <span class="help-block"><small>A U.S. Social Security Number is required to receive payment checks.</small></span>
            </div>
          </div>

          <div class="form-group">
            <div class="col-md-offset-3 col-sm-9">
              <a href="" wz-next ng-disabled="!profileForm.$valid" class="btn btn-primary btn-lg">Continue to Shipping &nbsp;<i class="fa fa-caret-right"></i></a>
            </div>
          </div>
        </form>

      </div>
    </wz-step>

    <wz-step title="Shipping" ng-if="true==true">

      <div class="col-sm-12">

          <div class="col-md-offset-3">

            <h1 ng-if="client.addresses.length > 0">Choose a shipping address</h1>
            <h1 ng-if="client.addresses == null || client.addresses.length == 0">Enter a shipping address</h1>

            <div class="row">
              <div class="col-xs-6 col-lg-4 checkout-address" ng-repeat="addressData in client.addresses">
                <span class="address-name">{{addressData.name}}</span>
                <span class="address-street">{{addressData.address1}} {{addressData.address2}}</span>
                <span class="address-region">{{addressData.city}}, {{addressData.state}} {{addressData.zip}}</span>
                <span class="phone-number">{{addressData.phone}}</span>
                <div class="address-actions">
                  <a href=""><i class="fa fa-pencil-square-o"></i> Edit</a>
                  &nbsp;&nbsp;
                  <a href=""><i class="fa fa-times-circle"></i> Remove</a>
                </div>
                <a href="" class="btn btn-primary" ng-click="selectAddressAndContinue(addressData)">Ship to this Address</a>
              </div><!-- /address -->
              
            </div>

            <!--<hr ng-if="profile.customerStatus=='existing'">-->
          </div><!-- /offset -->

          <form name="shippingForm" class="form-horizontal" role="form" novalidate>
            <div class="row form-group" ng-if="!isOnlineSponsoring">
              <label for="shippingFullName" class="col-md-3 control-label">Full Name</label>
              <div class="col-sm-8 col-lg-6">
                <input id="shippingFullName" name="name" ng-model="profile.newShippingAddress.name" ng-change="checkoutUpdated()" type="text" class="form-control" placeholder="" tabindex="1" required>
              </div>
            </div>

            <div class="row form-group">
              <label for="shippingAddress1" class="col-md-3 control-label">Address Line 1</label>
              <div class="col-sm-8 col-lg-6">
                <input id="shippingAddress1" name="address1" ng-model="profile.newShippingAddress.address1" ng-change="checkoutUpdated()" type="text" class="form-control" placeholder="Street address, P.O. box, company name, c/o " tabindex="2" required>
              </div>
            </div>

            <div class="row form-group">
              <label for="shippingAddress2" class="col-md-3 control-label">Address Line 2</label>
              <div class="col-sm-8 col-lg-6">
                <input id="shippingAddress2" name="address2" ng-model="profile.newShippingAddress.address2" ng-change="checkoutUpdated()" type="text" class="form-control" placeholder="Apartment, suite, unit, building, floor, etc. " tabindex="3">
              </div>
            </div>

            <div class="row form-group">
              <label for="shippingCity" class="col-md-3 control-label">City</label>
              <div class="col-sm-7 col-lg-5">
                <input id="shippingCity" name="city" ng-model="profile.newShippingAddress.city" type="text" ng-change="checkoutUpdated()" class="form-control" placeholder=" " tabindex="4" required>
              </div>
            </div>
            <div class="row form-group">
              <label for="shippingStateProvinceRegion" class="col-md-3 control-label">State/Province/Region</label>
            <!-- TO-DO: Fix CSS width of form control -->
              <div class="col-sm-6 col-lg-4">
                <form>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <select name="state" class="form-control" tabindex="5">
                          <option value="AL">Alabama</option>
                          <option value="AK">Alaska</option>
                          <option value="AZ">Arizona</option>
                          <option value="AR">Arkansas</option>
                          <option value="CA">California</option>
                          <option value="CO">Colorado</option>
                          <option value="CT">Connecticut</option>
                          <option value="DE">Delaware</option>
                          <option value="DC">District Of Columbia</option>
                          <option value="FL">Florida</option>
                          <option value="GA">Georgia</option>
                          <option value="HI">Hawaii</option>
                          <option value="ID">Idaho</option>
                          <option value="IL">Illinois</option>
                          <option value="IN">Indiana</option>
                          <option value="IA">Iowa</option>
                          <option value="KS">Kansas</option>
                          <option value="KY">Kentucky</option>
                          <option value="LA">Louisiana</option>
                          <option value="ME">Maine</option>
                          <option value="MD">Maryland</option>
                          <option value="MA">Massachusetts</option>
                          <option value="MI">Michigan</option>
                          <option value="MN">Minnesota</option>
                          <option value="MS">Mississippi</option>
                          <option value="MO">Missouri</option>
                          <option value="MT">Montana</option>
                          <option value="NE">Nebraska</option>
                          <option value="NV">Nevada</option>
                          <option value="NH">New Hampshire</option>
                          <option value="NJ">New Jersey</option>
                          <option value="NM">New Mexico</option>
                          <option value="NY">New York</option>
                          <option value="NC">North Carolina</option>
                          <option value="ND">North Dakota</option>
                          <option value="OH">Ohio</option>
                          <option value="OK">Oklahoma</option>
                          <option value="OR">Oregon</option>
                          <option value="PA">Pennsylvania</option>
                          <option value="RI">Rhode Island</option>
                          <option value="SC">South Carolina</option>
                          <option value="SD">South Dakota</option>
                          <option value="TN">Tennessee</option>
                          <option value="TX">Texas</option>
                          <option value="UT">Utah</option>
                          <option value="VT">Vermont</option>
                          <option value="VA">Virginia</option>
                          <option value="WA">Washington</option>
                          <option value="WV">West Virginia</option>
                          <option value="WI">Wisconsin</option>
                          <option value="WY">Wyoming</option>
                        </select>
                    </div>
                </form>

              <!-- Removed for now to add the Select tag for 50 states -->
                <!--input id="shippingStateProvinceRegion" name="stateProvinceRegion" ng-model="profile.newShippingAddress.stateProvinceRegion" ng-change="checkoutUpdated()" type="text" class="form-control" placeholder=" " tabindex="5" required-->
              </div>
            </div>

            <div class="row form-group">
              <label for="shippingZipPostalCode" class="col-md-3 control-label">Zip/Postal Code</label>
              <div class="col-sm-5 col-lg-3">
                <input id="shippingZipPostalCode" name="zipPostalCode" ng-model="profile.newShippingAddress.zipPostalCode" ng-change="checkoutUpdated()" type="text" class="form-control" placeholder=" " tabindex="6" required>
              </div>
            </div>

            <div class="row form-group">
              <label for="shippingCountry" class="col-md-3 control-label">Country</label>
              <div class="col-sm-6 col-lg-4">
                <select id="shippingCountry" ng-init="option[0]" name="country" ng-model="profile.newShippingAddress.country" ng-change="checkoutUpdated()" class="form-control" tabindex="7">
                  <option ng-selected="1">United States</option>
                </select>
              </div>
            </div>

            <div class="row form-group" ng-if="!isOnlineSponsoring" ng-class="{ 'has-error' : shippingForm.phoneNumber.$invalid && !shippingForm.phoneNumber.$pristine }">
              <label for="shippingPhoneNumber" class="col-md-3 control-label">Phone Number</label>
              <div class="col-sm-6 col-lg-4">
                <input id="shippingPhoneNumber" name="phoneNumber" ng-model="profile.newShippingAddress.phone" ng-minlength="10" ng-maxlength="13" maxlength="13" type="text" ng-pattern="/^\(?(\d{3})\)?[ .-]?(\d{3})[ .-]?(\d{4})$/" class="form-control" placeholder=" " tabindex="8" required>
                <span ng-show="shippingForm.phoneNumber.$error.pattern" class="help-block" ng-class="{ 'text-danger' : shippingForm.phoneNumber.$invalid && !shippingForm.phoneNumber.$pristine }">Phone Number needs to be at least 10 numbers.</span>
              </div>
              <a popover="May be printed on shipping label to assist delivery." popover-title="Phone Number" href="" class="form-info-link"><i class="fa fa-info-circle"></i> More Info</a>
            </div>

            
            <div class="col-md-offset-3">

              <hr>

            </div> <!-- /offset -->
            
            <div class="row form-group">
              <div class="col-md-offset-3 col-sm-9">
                <button type="button" class="btn btn-primary btn-lg" tabindex=" " ng-disabled="!shippingForm.$valid" ng-click="addAddressAndContinue(profile.newShippingAddress)">Ship to this address &nbsp;<i class="fa fa-caret-right"></i></button>
              </div>
            </div>
            
          </form>

      </div><!--/span-->

    </wz-step>

    <wz-step title="Payment" ng-if="true==true">

      <div class="col-sm-12">

        <div class="col-md-offset-3">
            <h1>Select Payment Option
              <span class="store-heading-description">
                You&rsquo;ll be able to review the order before being charged.
              </span>
            </h1>
          </div>

          <div class="col-md-offset-3" ng-if="profile.customerStatus=='existing'">
            <div class="row">

              <div class="col-xs-6 col-lg-4" ng-repeat="ccData in client.creditCards">
                <div class="checkout-card clearfix" ng-class="{active: $first}">
                  <img src="http://placehold.it/46x30" class="pull-right">
                  <p class="card-number">
                      <span>&bull;&bull;&bull;&bull;</span>
                      <span>&bull;&bull;&bull;&bull;</span>
                      <span>&bull;&bull;&bull;&bull;</span>
                    <span>{{substr(ccData.lastFour)}}</span>
                  </p>
                  <p class="card-expiry pull-left">
                    <small>EXP:</small>
                    {{ccData.expMonth}}/{{substr(ccData.expYear,2,2)}}
                  </p>
                  <button class="btn btn-primary pull-right card-use-btn" wz-next ng-click="addCard(ccData)">Use this Option <i class="fa fa-caret-right"></i></button>
                </div> 
                <div class="card-actions">
                  <a href=""><i class="fa fa-pencil-square-o"></i> Edit</a>
                  &nbsp;&nbsp;
                  <a href=""><i class="fa fa-times-circle"></i> Remove</a>
                </div>               
              </div><!-- /span -->
              
            </div>
          </div>

          <div class="row" ng-if="profile.customerStatus=='existing'">
            <div class="col-md-offset-3 col-lg-8">
              <hr>
              <h2 class=" ">Enter Payment Information</h2>
            </div>
          </div>
          <!--valid={{paymentForm.$valid}}-->
          <form name="paymentForm" class="form-horizontal" role="form" novalidate>

            <!-- CARD INFO -->
            <div class="form-group" ng-class="{ 'has-error' : paymentForm.cardName.$invalid && !paymentForm.cardName.$pristine }">
              <label for=" " class="col-md-3 control-label">Name on Card</label>
              <div class="col-sm-6 col-lg-4">
                <input ng-model="profile.newCard.name" ng-minlength="3" name="cardName" type="text" class="form-control" placeholder=" " tabindex=" " required>
                <span ng-show="paymentForm.cardName.$error.minlength" class="help-block" ng-class="{ 'text-danger' : paymentForm.cardName.$invalid && !paymentForm.cardName.$pristine }">Name on card is too short.</span>
                 <!--valid={{paymentForm.cardName.$valid}}-->
              </div>
            </div>

            <div class="form-group" ng-class="{ 'has-error' : paymentForm.number.$invalid && !paymentForm.number.$pristine }">
              <label for=" " class="col-md-3 control-label">Card Number</label>
              <div class="col-sm-6 col-lg-4">
                <input ng-model="profile.newCard.number" ng-minlength="13" ng-maxlength="16" maxlength="16" name="number" type="number" class="form-control" id=" " placeholder=" " tabindex=" " required>
                <span ng-show="paymentForm.number.$error.minlength" class="help-block" ng-class="{ 'text-danger' : paymentForm.number.$invalid && !paymentForm.number.$pristine }">Credit card needs to be at least 13 numbers.</span>
                <!--valid={{paymentForm.number.$valid}}-->
              </div>
            </div>
            <div class="form-group">
              <label for=" " class="col-md-3 control-label">Expiration</label>
              <div class="col-sm-5">
                <div class="row">
                  <div class="col-xs-4 col-sm-3 col-med-2" ng-class="{ 'has-error' : paymentForm.expMonth.$invalid && !paymentForm.expMonth.$pristine }">
                      <input ng-model="profile.newCard.expMonth" name="expMonth" type="text" class="form-control col-sm-1" ui-mask="99" placeholder="MM" tabindex=" " required>
                    <!--valid={{paymentForm.expMonth.$valid}}-->
                  </div>
                  <div class="col-xs-1">
                    <label class="control-label">/</label>
                  </div>
                  <div class="col-xs-6 col-sm-4 col-med-3" ng-class="{ 'has-error' : paymentForm.expYear.$invalid && !paymentForm.expYear.$pristine }">
                    <input ng-model="profile.newCard.expYear" name="expYear" type="text" class="form-control col-sm-3" ui-mask="9999" placeholder="YYYY" tabindex=" " required>
                    <!--valid={{paymentForm.expYear.$valid}}-->
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group" ng-class="{ 'has-error' : paymentForm.securityCode.$invalid && !paymentForm.securityCode.$pristine }">
              <label for=" " class="col-md-3 control-label">Security Code</label>
              <div class="col-sm-5">
                <div class="row">
                  <div class="col-xs-4 col-sm-3 col-med-2">
                    <input ng-model="profile.newCard.securityCode" ng-minlength="3" ng-maxlength="4" maxlength="4" name="securityCode" type="password" class="form-control col-sm-1" placeholder="&bull;&bull;&bull;" tabindex=" " required>
                    <!--valid={{paymentForm.securityCode.$valid}}-->
                  </div>
                  <div class="col-xs-6 col-sm-4 col-med-3">
                    <a href="" class="form-info-link"><i class="fa fa-info-circle"></i> What's this?</a>
                  </div>
                </div>
              </div>
            </div>

            <!-- BILLING SAME -->
            <div class="form-group">
              <div class="col-md-offset-3 col-sm-9">
                <div class="checkbox">
                  <label>
                    <input name="billSame" ng-model="checkout.billSame" type="checkbox" checked> My billing &amp; shipping address are the same
                    <!--valid={{paymentForm.billSame.$valid}}-->
                  </label>
                </div>
              </div>
            </div>

            <!-- BILLING -->
            billSame={{checkout.billSame}}
            <div class="cardAddressWrapper" ng-if="checkout.billSame==false">
              
                <div class="row form-group" ng-if="!isOnlineSponsoring" >
                  <label for="billingFullName" class="col-md-3 control-label">Full Name</label>
                  <div class="col-sm-8 col-lg-6">
                    <input name="name" ng-model="profile.newBillingAddress.name" ng-change="checkoutUpdated()" type="text" class="form-control" id="billingFullName" placeholder="" tabindex="1" required>
                  </div>
                </div>

                <div class="row form-group">
                  <label for="billingAddress1" class="col-md-3 control-label">Address Line 1</label>
                  <div class="col-sm-8 col-lg-6">
                    <input name="address1" ng-model="profile.newBillingAddress.address1" ng-change="checkoutUpdated()" type="text" class="form-control" id="billingAddress1" placeholder="Street address, P.O. box, company name, c/o " tabindex="2" required>
                  </div>
                </div>

                <div class="row form-group">
                  <label for="billingAddress2" class="col-md-3 control-label">Address Line 2</label>
                  <div class="col-sm-8 col-lg-6">
                    <input name="address2" ng-model="profile.newBillingAddress.address2" ng-change="checkoutUpdated()" type="text" class="form-control" id="billingAddress2" placeholder="Apartment, suite, unit, building, floor, etc. " tabindex="3">
                  </div>
                </div>

                <div class="row form-group">
                  <label for="billingCity" class="col-md-3 control-label">City</label>
                  <div class="col-sm-7 col-lg-5">
                    <input name="city" ng-model="profile.newBillingAddress.city" type="text" ng-change="checkoutUpdated()" class="form-control" id="billingCity" placeholder=" " tabindex="4" required>
                  </div>
                </div>

                <div class="row form-group">
                  <label for="billingStateProvinceRegion" class="col-md-3 control-label">State/Province/Region</label>
                              <!-- TO-DO: Fix CSS width of form control -->
              <div class="col-sm-6 col-lg-4">
                <form>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <select name="state" class="form-control" tabindex="5">
                          <option value="AL">Alabama</option>
                          <option value="AK">Alaska</option>
                          <option value="AZ">Arizona</option>
                          <option value="AR">Arkansas</option>
                          <option value="CA">California</option>
                          <option value="CO">Colorado</option>
                          <option value="CT">Connecticut</option>
                          <option value="DE">Delaware</option>
                          <option value="DC">District Of Columbia</option>
                          <option value="FL">Florida</option>
                          <option value="GA">Georgia</option>
                          <option value="HI">Hawaii</option>
                          <option value="ID">Idaho</option>
                          <option value="IL">Illinois</option>
                          <option value="IN">Indiana</option>
                          <option value="IA">Iowa</option>
                          <option value="KS">Kansas</option>
                          <option value="KY">Kentucky</option>
                          <option value="LA">Louisiana</option>
                          <option value="ME">Maine</option>
                          <option value="MD">Maryland</option>
                          <option value="MA">Massachusetts</option>
                          <option value="MI">Michigan</option>
                          <option value="MN">Minnesota</option>
                          <option value="MS">Mississippi</option>
                          <option value="MO">Missouri</option>
                          <option value="MT">Montana</option>
                          <option value="NE">Nebraska</option>
                          <option value="NV">Nevada</option>
                          <option value="NH">New Hampshire</option>
                          <option value="NJ">New Jersey</option>
                          <option value="NM">New Mexico</option>
                          <option value="NY">New York</option>
                          <option value="NC">North Carolina</option>
                          <option value="ND">North Dakota</option>
                          <option value="OH">Ohio</option>
                          <option value="OK">Oklahoma</option>
                          <option value="OR">Oregon</option>
                          <option value="PA">Pennsylvania</option>
                          <option value="RI">Rhode Island</option>
                          <option value="SC">South Carolina</option>
                          <option value="SD">South Dakota</option>
                          <option value="TN">Tennessee</option>
                          <option value="TX">Texas</option>
                          <option value="UT">Utah</option>
                          <option value="VT">Vermont</option>
                          <option value="VA">Virginia</option>
                          <option value="WA">Washington</option>
                          <option value="WV">West Virginia</option>
                          <option value="WI">Wisconsin</option>
                          <option value="WY">Wyoming</option>
                        </select>
                    </div>
                </form>

              <!-- Removed for now to add the Select tag for 50 states -->
                <!--input id="shippingStateProvinceRegion" name="stateProvinceRegion" ng-model="profile.newShippingAddress.stateProvinceRegion" ng-change="checkoutUpdated()" type="text" class="form-control" placeholder=" " tabindex="5" required-->
              </div>
                  <!--div class="col-sm-6 col-lg-4">
                    <input name="billingProvinceRegion" ng-model="profile.newBillingAddress.stateProvinceRegion" ng-change="checkoutUpdated()" type="text" class="form-control" id="billingStateProvinceRegion" placeholder=" " tabindex="5" required>
                  </div-->
                </div>

                <div class="row form-group">
                  <label for="billingZipPostalCode" class="col-md-3 control-label">Zip/Postal Code</label>
                  <div class="col-sm-5 col-lg-3">
                    <input name="billingzipPostalCode" ng-model="profile.newBillingAddress.zipPostalCode" ng-change="checkoutUpdated()" type="text" class="form-control" id="billingZipPostalCode" placeholder=" " tabindex="6" required>
                  </div>
                </div>

                <div class="row form-group">
                  <label for="billingCountry" class="col-md-3 control-label">Country</label>
                  <div class="col-sm-6 col-lg-4">
                    <select name="billingCountry" ng-model="profile.newBillingAddress.country" ng-change="checkoutUpdated()" class="form-control" id="billingCountry" tabindex="7">
                      <option ng-selected="1">United States</option>
                    </select>
                  </div>
                </div>

                <div class="row form-group" ng-if="!isOnlineSponsoring"  ng-class="{ 'has-error' : paymentForm.billingPhoneNumber.$invalid && !paymentForm.billingPhoneNumber.$pristine }">
                  <label for="billingPhoneNumber" class="col-md-3 control-label">Phone Number</label>
                  <div class="col-sm-6 col-lg-4">
                    <input name="billingPhoneNumber" ng-model="profile.newBillingAddress.phone" ng-minlength="10" ng-maxlength="12" maxlength="12" type="text" class="form-control" id="billingPhoneNumber" placeholder=" " tabindex="8" required>
                    <span ng-show="paymentForm.billingPhoneNumber.$error.minlength" class="help-block" ng-class="{ 'text-danger' : paymentForm.billingPhoneNumber.$invalid && !paymentForm.billingPhoneNumber.$pristine }">Phone Number needs to be at least 10 numbers.</span>
                  </div>
                  <a href="" class="form-info-link"><i class="fa fa-info-circle"></i> More Info</a>
                </div>


                <div class="col-md-offset-3">
                  <hr>
                </div> <!-- /offset -->
            </div>
        
            <div class="form-group">
              <div class="col-md-offset-3 col-sm-9">
                  <button type="button" ng-click="addPaymentMethod()" class="btn btn-primary btn-lg" tabindex=" " ng-disabled="!paymentForm.$valid">Save Payment Information &nbsp;<i class="fa fa-caret-right"></i></button>
              </div>
            </div>
            
          </form>

      </div><!--/span-->

    </wz-step>

    <wz-step title="Review" ng-if="true==true">

      <div class="col-sm-12">

        <div class="col-md-offset-3 col-lg-8">
            <h1>Review &amp; Confirm Order 
              <span class="store-heading-description">
                Clicking &ldquo;Place Order&ldquo; will charge your payment option in the amount below.
              </span>
            </h1>
          </div>
          
          <div class="col-md-offset-3 col-lg-8">

            <div class="row">
                
              <div class="col-xs-6 col-lg-4" ng-if="checkout.card">
                <h3>Charging To:</h3>
                <div class="checkout-card clearfix active">
                  <span class="pull-left">{{checkout.card.name}}</span>
                  <img src="http://placehold.it/46x30" class="pull-right">
                  <p class="card-number">
                    <span>&bull;&bull;&bull;&bull;</span>
                    <span>&bull;&bull;&bull;&bull;</span>
                    <span>&bull;&bull;&bull;&bull;</span>
                    <span>{{substr(ccData.lastFour)}}</span>
                  </p>
                  <p class="card-expiry pull-left">
                    <small>EXP:</small>
                    {{checkout.card.expMonth}}/{{substr(checkout.card.expYear,2,2)}}
                  </p>
                  <a ng-href="{{APP_BASE_URL}}/checkout?step=Payment" class="btn pull-right card-use-btn"><i class="fa fa-pencil-square-o"></i> Change Card</a>
                </div>              
              </div><!-- /card -->

              <div class="col-xs-6 col-lg-4 checkout-address" ng-if="checkout.shipping">
                <h3>Shipping To:</h3>
                <span class="address-name">{{checkout.shipping.name}}</span>
                <span class="address-street">{{checkout.shipping.address1}} {{checkout.shipping.address2}}</span>
                <span class="address-region">{{checkout.shipping.city}}, {{checkout.shipping.state}} {{checkout.shipping.zip}}</span>
                <span class="phone-number">{{checkout.shipping.phone}}</span>
                <span ng-if="!isOnlineSponsoring">Speed: {{shippingSpeed}}</span>
                <div class="address-actions">
                  <a ng-href="{{APP_BASE_URL}}/checkout?step=Shipping"><i class="fa fa-pencil-square-o"></i> Change Address</a>
                </div>
              </div><!-- /address -->

              <div class="col-xs-6 col-lg-4 checkout-address" ng-if="checkout.billing.name">
                <h3>Billing To:</h3>
                <span class="address-name">{{checkout.billing.name}}</span>
                <span class="address-street">{{checkout.billing.address1}} {{checkout.billing.address2}}</span>
                <span class="address-region">{{checkout.billing.city}}, {{checkout.billing.state}} {{checkout.billing.zip}}</span>
                <span class="phone-number">{{checkout.billing.phone}}</span>
                <div class="address-actions">
                  <a ng-href="{{APP_BASE_URL}}/checkout?step=Payment"><i class="fa fa-pencil-square-o"></i> Change Address</a>
                </div>
              </div><!-- /address -->           
              

              <div class="col-xs-6 col-lg-4 checkout-address" ng-if="!checkout.billing.name">
                <h3>Billing To:</h3>
                <span class="address-name">{{checkout.shipping.name}}</span>
                <span class="address-street">{{checkout.shipping.address1}} {{checkout.shipping.address2}}</span>
                <span class="address-region">{{checkout.shipping.city}}, {{checkout.shipping.state}} {{checkout.shipping.zip}}</span>
                <span class="phone-number">{{checkout.shipping.phone}}</span>
                <div class="address-actions">
                  <a ng-href="{{APP_BASE_URL}}/checkout?step=Payment"><i class="fa fa-pencil-square-o"></i> Change Address</a>
                </div>
              </div><!-- /address -->

            </div><!-- /row -->

            <hr>

            <form class="form order-details" role="form" name="confirmForm">
              <a ng-href="{{STORE_BASE_URL}}/cart" class="pull-right" style="margin-top:10px"><i class="fa fa-pencil-square-o"></i> make changes</a>
              <h2 class="">Order Details</h2>
              <div class="form-group">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Qty</th>
                      <th>Description</th>
                      <th align="right">Price</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat="item in items">
                      <td>{{item.quantity}}</td>
                      <td>
                        <p class="confirmation-description">
                          {{item.name}}
                        </p>
                      </td>
                      <td align="right">
                            <!--<span ng-repeat="detailprice in item.product.pricing.detailprice">-->
                                <!--<span ng-if="detailprice.pricetype=='sale'" class="item-price-sale">-->
                                  <!--{{detailprice.price | currency}}-->
                                <!--</span>-->
                                <!--<span ng-if="detailprice.pricetype=='retail'" class="item-price-strike">-->
                                  <!--${{detailprice.price}}-->
                                <!--</span>-->
                            <!--</span>-->
                            <!--<span ng-if="product.pricing.detailprice.price">-->
                                <!--<span class="item-price">-->
                                  <!--{{item.product.pricing.detailprice.price | currency}}-->
                                <!--</span>-->
                            <!--</span>-->
                            <span ng-repeat="detailprice in item.product.prices[0]">
                              <span ng-if="detailprice.typeId==2" class="item-price-sale">
                                {{detailprice.price | currency}}
                              </span>
                              <span ng-if="detailprice.typeId==1" class="item-price-strike">
                                {{detailprice.price | currency}}
                              </span>
                            </span>
                            <span ng-if="item.product.prices[0].price">
                              <span class="item-price">
                                {{item.product.prices[0].price | currency}}
                              </span>
                            </span>
                      </td>
                    </tr>
                  </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="3">
                        <p>Subtotal: {{total() | currency}}</p>
                        <p>Shipping: $15.00</p>
                        <p>Tax: 8.25%</p>
                        <p class="lead"><b>Total Charges: {{(total()* 1.0825) + 15 | currency}}</b></p>
                      </td>
                    </tr>
                  </tfoot>
                </table>

              </div>

              <div class="form-group text-right">
                <label class="checkbox-inline">
                    
                        <input type="checkbox" value="" ng-model="checkout.agree" required>
                    
                  I agree to the <a href="" data-toggle="modal" data-target=".bs-example-modal-lg-terms">Terms and Conditions</a>
                  &nbsp;&nbsp;&nbsp;&nbsp;
                </label>
                <button type="button" class="btn btn-link pull-left" tabindex=" " ng-click="confirmAlert('Are you sure you\'d like to cancel your order?')">Cancel Order</button>
                <button type="button" class="btn btn-primary btn-lg" tabindex=" " wz-next ng-disabled="!confirmForm.$valid">Place Order &nbsp;<i class="fa fa-caret-right"></i></button>
              </div>

            </form>
          </div>

      </div><!--/span-->

    </wz-step>

    <wz-step title="Finish" ng-if="true==true">

      <div class="col-sm-12">

        <div class="col-md-offset-3 col-lg-8">
          <a href="" class="pull-right print-link"><i class="fa fa-print"></i> Print this page</a>
          <h1>Thank you!
                    <span class="store-heading-description">
                      We have received your order and will be processing it shortly.
                    </span>
                  </h1>
        </div>

        <div class="col-md-offset-3 col-lg-8">
          <h2 class="">Confirmation Number: <label style="color:black;">1234567890</label></h2>
          <hr>

          <form class="form order-details" role="form">
            <div class="form-group">
              <table class="table">
                <thead>
                  <tr>
                    <th>Qty</th>
                    <th>Description</th>
                    <th align="right">Price</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="item in items">
                      <td>{{item.quantity}}</td>
                      <td>
                        <p class="confirmation-description">
                          {{item.name}}
                        </p>
                      </td>
                      <td align="right">
                            <!--<span ng-repeat="detailprice in item.product.pricing.detailprice">-->
                                <!--<span ng-if="detailprice.pricetype=='sale'" class="item-price-sale">-->
                                  <!--{{detailprice.price | currency}}-->
                                <!--</span>-->
                                <!--<span ng-if="detailprice.pricetype=='retail'" class="item-price-strike">-->
                                  <!--${{detailprice.price}}-->
                                <!--</span>-->
                            <!--</span>-->
                            <!--<span ng-if="item.product.pricing.detailprice.price">-->
                                <!--<span class="item-price">-->
                                  <!--{{item.product.pricing.detailprice.price | currency}}-->
                                <!--</span>-->
                            <!--</span>-->
                            <span ng-repeat="detailprice in item.product.prices[0]">
                              <span ng-if="detailprice.typeId==2" class="item-price-sale">
                                {{detailprice.price | currency}}
                              </span>
                              <span ng-if="detailprice.typeId==1" class="item-price-strike">
                                {{detailprice.price | currency}}
                              </span>
                            </span>
                            <span ng-if="item.product.prices[0].price">
                              <span class="item-price">
                                {{item.product.prices[0].price | currency}}
                              </span>
                            </span>
                      </td>
                    </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td colspan="3">
                      <p>Subtotal: {{total() | currency}}</p>
                        <p>Shipping: $15.00</p>
                        <p>Tax: 8.25%</p>
                        <p class="lead"><b class="text-success"><i class="fa fa-check"></i> Successfully Charged: {{(total()* 1.0825) + 15 | currency}}</b></p>
                    </td>
                  </tr>
                </tfoot>
              </table>
            </div>

          </form>
          <h2 class="">How to track your order</h2>
          <hr>
          <p>Lorem Ipsum</p>

        </div>

      </div><!--/span-->

    </wz-step>
  </wizard>

</section><!--/row-->
