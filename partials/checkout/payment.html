<div class="col-sm-12">

<div class="col-md-offset-3">
  <h1>Select Payment Option
              <span class="store-heading-description">
                You&rsquo;ll be able to review the order before being charged.
              </span>
  </h1>
</div>

<div class="col-md-offset-3" ng-if="profile.customerStatus=='existing'">
  <div class="row">

    <div class="col-xs-6 col-lg-4" ng-repeat="ccData in client.creditCards">
      <div class="checkout-card clearfix" ng-class="{active: $first}">
        <img src="/img/46x30" class="pull-right">
        <p class="card-number">
          <span>&bull;&bull;&bull;&bull;</span>
          <span>&bull;&bull;&bull;&bull;</span>
          <span>&bull;&bull;&bull;&bull;</span>
          <span>{{substr(ccData.lastFour)}}</span>
        </p>
        <p class="card-expiry pull-left">
          <small>EXP:</small>
          {{ccData.expMonth}}/{{substr(ccData.expYear,2,2)}}
        </p>
        <button class="btn btn-primary pull-right card-use-btn" wz-next ng-click="addCard(ccData)">Use this Option <i class="fa fa-caret-right"></i></button>
      </div>
      <div class="card-actions">
        <a href=""><i class="fa fa-pencil-square-o"></i> Edit</a>
        &nbsp;&nbsp;
        <a href=""><i class="fa fa-times-circle"></i> Remove</a>
      </div>
    </div><!-- /span -->

  </div>
</div>

<div class="row" ng-if="profile.customerStatus=='existing'">
  <div class="col-md-offset-3 col-lg-8">
    <hr>
    <h2 class=" ">Enter Payment Information</h2>
  </div>
</div>
<!--valid={{paymentForm.$valid}}-->
<form name="paymentForm" class="form-horizontal" role="form" novalidate>

<!-- CARD INFO -->
<div class="form-group" ng-class="{ 'has-error' : paymentForm.cardName.$invalid && !paymentForm.cardName.$pristine }">
  <label for=" " class="col-md-3 control-label">Name on Card</label>
  <div class="col-sm-6 col-lg-4">
    <input ng-model="profile.newCard.name" ng-minlength="3" name="cardName" type="text" class="form-control" placeholder=" " required>
    <span ng-show="paymentForm.cardName.$error.minlength" class="help-block" ng-class="{ 'text-danger' : paymentForm.cardName.$invalid && !paymentForm.cardName.$pristine }">Name on card is too short.</span>
    <!--valid={{paymentForm.cardName.$valid}}-->
  </div>
</div>

<div class="form-group" ng-class="{ 'has-error' : paymentForm.number.$invalid && !paymentForm.number.$pristine }">
  <label for=" " class="col-md-3 control-label">Card Number</label>
  <div class="col-sm-6 col-lg-4">
    <input ng-model="profile.newCard.card" data-ng-blur="visited=true" ng-minlength="13" ng-maxlength="16" maxlength="16" name="number" type="text" class="form-control" id=" " placeholder=" " data-ui-validate=" 'isValidCard($value)' " required>
    <span ng-show="visited && (paymentForm.number.$error.minlength || paymentForm.number.$error.validator)" class="help-block" ng-class="{ 'text-danger' : paymentForm.number.$invalid && !paymentForm.number.$pristine }">Invalid credit card number</span>
    <!--valid={{paymentForm.number.$valid}}-->
  </div>
  <div class="col-sm-4 col-lg-4" ng-model="cardType" ng-show="!paymentForm.number.$error.minlength && !paymentForm.number.$error.validator">
    <img class="img-responsive cardImg" src="/img/visa.png" ng-show="profile.newCard.cardType=='Visa'">
    <img class="img-responsive cardImg" src="/img/mastercard.png" ng-show="profile.newCard.cardType=='MasterCard'">
    <img class="img-responsive cardImg" src="/img/discover.png" ng-show="profile.newCard.cardType=='Discover Card'">
    <img class="img-responsive cardImg" src="/img/americanexpress.png" ng-show="profile.newCard.cardType=='American Express'">
  </div>
</div>
<div class="form-group">
  <label for=" " class="col-md-3 control-label">Expiration</label>
  <div class="col-sm-5">
    <div class="row">
      <div class="col-xs-4 col-sm-3 col-med-2" ng-class="{ 'has-error' : paymentForm.expMonth.$invalid && !paymentForm.expMonth.$pristine }">
        <input ng-model="profile.newCard.expMonth" name="expMonth" type="text" class="form-control col-sm-1" ui-mask="99" placeholder="MM" required>
        <!--valid={{paymentForm.expMonth.$valid}}-->
      </div>
      <div class="col-xs-1">
        <label class="control-label">/</label>
      </div>
      <div class="col-xs-6 col-sm-4 col-med-3" ng-class="{ 'has-error' : paymentForm.expYear.$invalid && !paymentForm.expYear.$pristine }">
        <input ng-model="profile.newCard.expYear" name="expYear" type="text" class="form-control col-sm-3" ui-mask="9999" placeholder="YYYY" required>
        <!--valid={{paymentForm.expYear.$valid}}-->
      </div>
    </div>
  </div>
</div>
<div class="form-group" ng-class="{ 'has-error' : paymentForm.cvv.$invalid && !paymentForm.cvv.$pristine }">
  <label for=" " class="col-md-3 control-label">Security Code</label>
  <div class="col-sm-5">
    <div class="row">
      <div class="col-xs-4 col-sm-4 col-med-2">
        <input ng-model="profile.newCard.cvv" ng-minlength="3" ng-maxlength="4" maxlength="4" name="cvv" type="text" class="form-control col-sm-1" placeholder="&bull;&bull;&bull;" required>
        <!--valid={{paymentForm.cvv.$valid}}-->
      </div>
      <div class="col-xs-6 col-sm-4 col-med-3">
            <a popover="3-4 digit number located on your credit card" popover-title="Security Code/CVV2" href="" tabindex="-1"><i class="fa fa-info-circle"></i> What's this?</a>
      </div>
    </div>
  </div>
</div>

<!-- BILLING SAME -->
<div class="form-group">
  <div class="col-md-offset-3 col-sm-9">
    <div class="checkbox">
      <label>
        <input name="billSame" data-ng-init="checkout.billSame=true" ng-model="checkout.billSame" type="checkbox" tabindex="-2" checked="checked"> My billing &amp; shipping address are the same
        <!--valid={{paymentForm.billSame.$valid}}-->
      </label>
    </div>
  </div>
</div>

<!-- BILLING -->

<div class="cardAddressWrapper" ng-if="checkout.billSame==false">

  <div class="row form-group" ng-if="!isOnlineSponsoring" >
    <label for="billingFullName" class="col-md-3 control-label">Full Name</label>
    <div class="col-sm-8 col-lg-6">
      <input name="name" ng-model="profile.newBillingAddress.name" type="text" class="form-control" id="billingFullName" placeholder="" required>
    </div>
  </div>

  <div class="row form-group">
    <label for="billingAddress1" class="col-md-3 control-label">Address Line 1</label>
    <div class="col-sm-8 col-lg-6">
      <input name="address1" ng-model="profile.newBillingAddress.address1" type="text" class="form-control" id="billingAddress1" placeholder="Street address, P.O. box, company name, c/o " required>
    </div>
  </div>

  <div class="row form-group">
    <label for="billingAddress2" class="col-md-3 control-label">Address Line 2</label>
    <div class="col-sm-8 col-lg-6">
      <input name="address2" ng-model="profile.newBillingAddress.address2" type="text" class="form-control" id="billingAddress2" placeholder="Apartment, suite, unit, building, floor, etc. " >
    </div>
  </div>

  <div class="row form-group">
    <label for="billingCity" class="col-md-3 control-label">City</label>
    <div class="col-sm-7 col-lg-5">
      <input name="city" ng-model="profile.newBillingAddress.city" type="text" class="form-control" id="billingCity" placeholder=" " required>
    </div>
  </div>

  <div class="row form-group">
    <label for="billingStateProvinceRegion" class="col-md-3 control-label">State/Province/Region</label>
    <!-- TO-DO: Fix CSS width of form control -->
    <div class="col-sm-5 col-lg-3">
        <div class="">
          <select id="billingStateProvinceRegion" name="state" ng-model="profile.newBillingAddress.state" class="form-control" >
            <option value="AL">Alabama</option>
            <option value="AK">Alaska</option>
            <option value="AZ">Arizona</option>
            <option value="AR">Arkansas</option>
            <option value="CA">California</option>
            <option value="CO">Colorado</option>
            <option value="CT">Connecticut</option>
            <option value="DE">Delaware</option>
            <option value="DC">District Of Columbia</option>
            <option value="FL">Florida</option>
            <option value="GA">Georgia</option>
            <option value="HI">Hawaii</option>
            <option value="ID">Idaho</option>
            <option value="IL">Illinois</option>
            <option value="IN">Indiana</option>
            <option value="IA">Iowa</option>
            <option value="KS">Kansas</option>
            <option value="KY">Kentucky</option>
            <option value="LA">Louisiana</option>
            <option value="ME">Maine</option>
            <option value="MD">Maryland</option>
            <option value="MA">Massachusetts</option>
            <option value="MI">Michigan</option>
            <option value="MN">Minnesota</option>
            <option value="MS">Mississippi</option>
            <option value="MO">Missouri</option>
            <option value="MT">Montana</option>
            <option value="NE">Nebraska</option>
            <option value="NV">Nevada</option>
            <option value="NH">New Hampshire</option>
            <option value="NJ">New Jersey</option>
            <option value="NM">New Mexico</option>
            <option value="NY">New York</option>
            <option value="NC">North Carolina</option>
            <option value="ND">North Dakota</option>
            <option value="OH">Ohio</option>
            <option value="OK">Oklahoma</option>
            <option value="OR">Oregon</option>
            <option value="PA">Pennsylvania</option>
            <option value="RI">Rhode Island</option>
            <option value="SC">South Carolina</option>
            <option value="SD">South Dakota</option>
            <option value="TN">Tennessee</option>
            <option value="TX">Texas</option>
            <option value="UT">Utah</option>
            <option value="VT">Vermont</option>
            <option value="VA">Virginia</option>
            <option value="WA">Washington</option>
            <option value="WV">West Virginia</option>
            <option value="WI">Wisconsin</option>
            <option value="WY">Wyoming</option>
          </select>
        </div>

      <!-- Removed for now to add the Select tag for 50 states -->
      <!--input id="shippingStateProvinceRegion" name="stateProvinceRegion" ng-model="profile.newShippingAddress.stateProvinceRegion" type="text" class="form-control" placeholder=" " required-->
    </div>
    <!--div class="col-sm-6 col-lg-4">
      <input name="billingProvinceRegion" ng-model="profile.newBillingAddress.stateProvinceRegion" type="text" class="form-control" id="billingStateProvinceRegion" placeholder=" " required>
    </div-->
  </div>

  <div class="row form-group">
    <label for="billingZipPostalCode" class="col-md-3 control-label">Zip/Postal Code</label>
    <div class="col-sm-5 col-lg-3">
      <input name="billingzipPostalCode" ng-model="profile.newBillingAddress.zip" type="text" class="form-control" id="billingZipPostalCode" placeholder=" " required>
    </div>
  </div>

  <div class="row form-group">
    <label for="billingCountry" class="col-md-3 control-label">Country</label>
    <div class="col-sm-5 col-lg-3">
      <select id="billingCountry" name="billingCountry" data-ng-init="profile.newBillingAddress.country='US'" ng-model="profile.newBillingAddress.country" class="form-control" >
        <option ng-selected="true" value="US">United States</option>
      </select>
    </div>
  </div>

  <div class="row form-group" ng-if="!isOnlineSponsoring"  ng-class="{ 'has-error' : paymentForm.billingPhoneNumber.$invalid && !paymentForm.billingPhoneNumber.$pristine }">
    <label for="billingPhoneNumber" class="col-md-3 control-label">Phone Number</label>
    <div class="col-sm-6 col-lg-4">
      <input name="billingPhoneNumber" ng-model="profile.newBillingAddress.phone" ng-minlength="10" ng-maxlength="12" maxlength="12" type="text" class="form-control" id="billingPhoneNumber" ui-mask="(999) 999-9999" placeholder="(xxx) xxx-xxxx" required>
      <span ng-show="paymentForm.billingPhoneNumber.$error.minlength" class="help-block" ng-class="{ 'text-danger' : paymentForm.billingPhoneNumber.$invalid && !paymentForm.billingPhoneNumber.$pristine }">Phone Number needs to be at least 10 numbers.</span>
    </div>
    <a href="" class="form-info-link"><i class="fa fa-info-circle"></i> More Info</a>
  </div>


  <div class="col-md-offset-3">
    <hr>
  </div> <!-- /offset -->
</div>

<div class="form-group">
  <div class="col-md-offset-3 col-sm-9">
    <div class="error" ng-show="billingAddressError && !checkout.billSame" ng-bind="billingAddressError"></div>
    <button type="button" ng-click="addPaymentMethod()" class="btn btn-primary btn-lg" ng-disabled="!paymentForm.$valid">Save Payment Information &nbsp;<i class="fa fa-caret-right"></i></button>
  </div>
</div>

</form>

</div><!--/span-->
